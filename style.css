let player = {
  name: "",
  money: 0,
  game: ""
};

function selectGame(game) {
  const name = document.getElementById("nickname").value.trim();
  const money = Number(document.getElementById("moneyInput").value);

  if (!name || money <= 0) {
    alert("닉네임과 보유 금액을 입력하세요.");
    return;
  }

  player.name = name;
  player.money = money;
  player.game = game;

  document.getElementById("mainScreen").classList.add("hidden");
  document.getElementById("gameScreen").classList.remove("hidden");

  document.getElementById("playerName").textContent = player.name;
  updateMoney();

  document.getElementById("oddEvenArea").classList.add("hidden");
  document.getElementById("ladderArea").classList.add("hidden");

  if (game === "oddEven") {
    document.getElementById("gameTitle").textContent = "홀짝 게임";
    document.getElementById("oddEvenArea").classList.remove("hidden");
  } else {
    document.getElementById("gameTitle").textContent = "사다리 게임";
    document.getElementById("ladderArea").classList.remove("hidden");
  }

  document.getElementById("result").textContent = "";
}

function updateMoney() {
  document.getElementById("currentMoney").textContent = player.money;
}

function getBet() {
  const bet = Number(document.getElementById("betAmount").value);
  if (bet <= 0 || bet > player.money) {
    alert("배팅 금액이 올바르지 않습니다.");
    return null;
  }
  return bet;
}

/* 홀짝 */
function playOddEven(choice) {
  const bet = getBet();
  if (!bet) return;

  const number = Math.floor(Math.random() * 10) + 1;
  const isOdd = number % 2 === 1;

  let change = 0;
  if ((choice === "odd" && isOdd) || (choice === "even" && !isOdd)) {
    change = bet * 2;
  } else {
    change = -bet;
  }

  player.money += change;
  updateMoney();

  document.getElementById("result").textContent =
    `숫자: ${number} → ${change > 0 ? "+" : ""}${change}`;
}

/* 사다리 */
function playLadder() {
  const bet = getBet();
  if (!bet) return;

  const rank = Math.floor(Math.random() * 5) + 1;
  let multiplier = [3, 2, 0, -1, -2][rank - 1];
  const change = bet * multiplier;

  player.money += change;
  updateMoney();

  document.getElementById("result").textContent =
    `${rank}등 → ${change > 0 ? "+" : ""}${change}`;
}

function goMain() {
  document.getElementById("gameScreen").classList.add("hidden");
  document.getElementById("mainScreen").classList.remove("hidden");
}
